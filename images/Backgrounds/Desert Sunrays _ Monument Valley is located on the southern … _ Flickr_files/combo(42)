YUI.add("flickr-activity-recentByType-fetcher",function(e,t){"use strict";e.namespace("ListFetchers")["flickr-activity-recentByType"]={run:function(i,n){var o=this,s=this._processParams(i);return new e.FlickrPromise({apiResponse:n.callAPI("flickr.activity.recentByType",s),notificationModelRegistry:n.getModelRegistry("notification-models"),notificationsModelRegistry:n.getModelRegistry("person-notifications-models")}).then(function(e){return o._processResponse(e,i,s,n)},e.FetcherErrorLogger(t))},_processParams:function(t){var i={extras:["sizes","icon_urls","ignored","rev_ignored","tags","autotags","datecreate"].join(",")+","+e.APIHelper.request.getRebootPhotoExtras(),count:30,per_object:50};return"continuation"in t?i.continuation=t.continuation:"page"in t&&(i.page=t.page,i.per_page=t.perPage),i},_processResponse:function(t,i,n,o){var s=t.apiResponse,a=t.notificationModelRegistry,r=t.notificationsModelRegistry,c=[],p=new e.NotificationsHelper(o);return s.items.item.forEach(function(t){var i=t.events||[],n={id:e.guid(),isSeen:1===t.seen||!0===t.seen,isMuted:1===t.is_muted,type:t.type,timestamp:t.date,activityData:t,eventDataList:i};c.push(p.extractEntitiesFromResponse(n).then(function(n){var o={id:e.guid(),isSeen:1===t.seen||!0===t.seen,isMuted:1===t.is_muted,type:t.type,timestamp:t.date,activityData:t,eventDataList:i,userModels:n.userModels,activityEntityModels:n.activityEntityModels,eventEntityModelsList:n.eventEntityModelsList};return a.addOrUpdate(o)}))}),e.Promise.all(c).then(function(e){var t={id:i.id};return"continuation"in n?{notificationModels:e,continuation:s.continuation}:"page"in n?(r.exists(i.id)?r.getValue(i.id,"notifications").addPage({page:n.page,perPage:n.per_page,pageContent:e,totalItems:parseInt(s.items.total||0,10)}):(t.notifications=e,r.add(t)),e):void 0})}}},"@VERSION@",{requires:["flickr-promise","search-helper","querystring-parse-simple"],optional:["url-helper","notification-models","person-notifications-models","contact-models","photo-models","notification-models"]});YUI.add("notification-OLD-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-activity-recentByType"].run(t,this.appContext)}},attributes:{id:{setter:function(e){return e||this.appContext.getViewer().nsid}},seen:{},objectType:{},object:{isModel:!0},events:{isListProxy:!0},isMuted:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-activity-recentByType-fetcher"]});YUI.add("notification-group-discussion-models",function(r){function o(r){o.superclass.constructor.call(this,r)}r.Models[this.name]=o,r.extend(o,r.FlickrModelRegistry,{name:this.name,parseDiscussionModel:function(o,e,i,s){return{id:o,pathAlias:e,title:i.name,replyCount:i.replies,groupID:i.group_id,groupName:i.groupName,iconUrls:r.APIHelper.response.removeProtocolFromURL(i.iconurls),coverPhotoUrls:r.APIHelper.response.removeProtocolFromURL(i.coverphoto_url),group:s}},attributes:{id:{},pathAlias:{},title:{},replyCount:{},groupID:{},groupName:{},iconUrls:{},coverPhotoUrls:{},url:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(r){return"/groups/"+this.getValue(r,"groupID")+"/discuss/"+r}},groupUrl:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(r){return"/groups/"+this.getValue(r,"groupID")}},group:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry"]});YUI.add("notification-gallery-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseGalleryModel:function(t){return{id:t.id,pathAlias:t.pathalias,title:t.title._content,iconUrls:e.APIHelper.response.removeProtocolFromURL(t.iconurls),owner:{id:t.owner,username:t.ownername,displayname:t.realname}}},attributes:{id:{},title:{},pathAlias:{},url:{readOnly:!0,derivedBy:["id","owner","pathAlias"],defaultFn:function(e){return"/photos/"+(this.getValue(e,"pathAlias")||this.getValue(e,"owner").id)+"/galleries/"+e}},iconUrls:{},owner:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});YUI.add("notification-flickrmail-models",function(i){function e(i){e.superclass.constructor.call(this,i)}i.Models[this.name]=e,i.extend(e,i.FlickrModelRegistry,{name:this.name,parseFlickrMailModel:function(i){return{id:i.id,isMuted:i.is_muted}},attributes:{id:{},isMuted:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});YUI.add("notification-event-fave-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});YUI.add("notification-event-comment-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{},content:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});